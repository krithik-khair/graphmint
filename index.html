<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=1200, initial-scale=1.0, maximum-scale=1.0">
<title>GraphMint: Ultimate Chart Generator</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;}
body{background:#f5f7fa;color:#333;padding:15px;max-width:1200px;min-width:1200px;margin:0 auto;overflow-x:auto;}
header{text-align:center;margin-bottom:20px;padding-bottom:15px;border-bottom:1px solid #e1e5eb;}
h1{color:#2c3e50;margin-bottom:5px;font-size:1.8rem;}
.tagline{color:#7f8c8d;font-size:1rem;}
.container{display:flex;flex-wrap:nowrap;gap:20px;margin-bottom:20px;}
.input-section,.chart-section{background:white;padding:20px;border-radius:10px;box-shadow:0 5px 15px rgba(0,0,0,0.05);}
.input-section{flex:0 0 350px;}
.chart-section{flex:1;display:flex;flex-direction:column;}
.section-title{font-size:1.2rem;color:#2c3e50;margin-bottom:15px;border-bottom:1px solid #ecf0f1;padding-bottom:8px;}
label{font-weight:600;color:#34495e;margin-bottom:6px;display:block;}
select,input,textarea{width:100%;padding:10px;border:1px solid #ddd;border-radius:6px;font-size:0.95rem;}
textarea{min-height:120px;resize:vertical;font-family:monospace;}
.chart-container{flex:1;position:relative;width:100%;min-height:400px;margin-top:10px;}
.button-group{display:flex;gap:8px;margin-top:15px;flex-wrap:wrap;}
button{padding:10px 15px;border:none;border-radius:6px;font-size:0.95rem;font-weight:600;cursor:pointer;flex:1 1 auto;}
.generate-btn{background:#3498db;color:white;}
.reset-btn{background:#e74c3c;color:white;}
.download-btn{background:#2ecc71;color:white;}
.examples{margin-top:15px;background:#f8f9fa;padding:10px;border-radius:6px;border-left:4px solid #3498db;}
.example-text{background:white;padding:8px;border-radius:4px;font-family:monospace;margin-bottom:6px;cursor:pointer;}
.example-text:hover{background:#f0f8ff;}
footer{text-align:center;margin-top:25px;padding-top:15px;border-top:1px solid #e1e5eb;color:#7f8c8d;font-size:0.85rem;}
</style>
</head>
<body>

<header>
<h1>GraphMint</h1>
<p class="tagline">Ultimate Chart Generator – Create charts instantly with unlimited types.</p>
</header>

<div class="container">
<div class="input-section">
<h2 class="section-title">Chart Settings</h2>

<label for="chartType">Chart Type</label>
<select id="chartType">
<option value="bar">Bar Chart</option>
<option value="line">Line Chart</option>
<option value="area">Area Chart</option>
<option value="pie">Pie Chart</option>
<option value="doughnut">Doughnut Chart</option>
<option value="radar">Radar Chart</option>
<option value="polarArea">Polar Area Chart</option>
<option value="pyramid">Pyramid Chart</option>
</select>

<label for="chartData">Enter Your Data</label>
<textarea id="chartData">Sales: 300
Marketing: 200
R&D: 150
Support: 100</textarea>

<label for="chartTitle">Chart Title</label>
<input type="text" id="chartTitle" value="Department Budget Allocation">

<label for="xAxisTitle">X-Axis Title</label>
<input type="text" id="xAxisTitle" value="Department">

<label for="yAxisTitle">Y-Axis Title</label>
<input type="text" id="yAxisTitle" value="Budget ($)">

<div class="button-group">
<button class="generate-btn" id="generateBtn">Generate Chart</button>
<button class="reset-btn" id="resetBtn">Reset</button>
</div>

<div class="examples">
<h3>Try These Examples:</h3>
<div class="example-text" data-example="1">Quarterly Revenue: Q1: 450, Q2: 520, Q3: 480, Q4: 600</div>
<div class="example-text" data-example="2">Market Share: Apple: 25, Samsung: 22, Xiaomi: 12, Other: 41</div>
<div class="example-text" data-example="3">Website Traffic Sources: Direct: 350, Organic: 420, Social: 180, Email: 120</div>
</div>
</div>

<div class="chart-section">
<h2 class="section-title">Generated Chart</h2>
<div class="chart-container">
<canvas id="myChart"></canvas>
</div>
<div class="button-group">
<button class="download-btn" id="downloadPngBtn">Download PNG</button>
<button class="download-btn" id="downloadSvgBtn">Download SVG</button>
</div>
</div>
</div>

<footer>
<p>GraphMint © 2025 — Created by <b>Krithik Khair</b></p>
</footer>

<script>
let myChart=null;

function parseChartData(text){
    const lines=text.split('\n').filter(l=>l.trim());
    const labels=[],values=[];
    lines.forEach(line=>{
        const sep=line.indexOf(':');
        if(sep!==-1){
            labels.push(line.substring(0,sep).trim());
            values.push(Number(line.substring( sep+1 ).trim()));
        }
    });
    return {labels,values};
}

function generateColors(count){
    return Array.from({length:count},(_,i)=>`hsl(${i*(360/count)},65%,75%)`);
}

function createChart(){
    const type=document.getElementById('chartType').value;
    const {labels,values}=parseChartData(document.getElementById('chartData').value);
    if(!labels.length){alert("Enter valid data!");return;}
    const colors=generateColors(labels.length);
    if(myChart) myChart.destroy();

    let datasets=[];
    if(type==='area'){
        datasets=[{
            label:document.getElementById('chartTitle').value,
            data:values,
            backgroundColor:'rgba(52,152,219,0.4)',
            borderColor:'#3498db',
            borderWidth:2,
            fill:true
        }];
    }else if(type==='pyramid'){
        datasets=[{
            label:document.getElementById('chartTitle').value,
            data:values.reverse(),
            backgroundColor:colors.reverse()
        }];
    }else{
        datasets=[{
            label:document.getElementById('chartTitle').value,
            data:values,
            backgroundColor:colors,
            borderColor:colors.map(c=>c.replace('75%','50%')),
            borderWidth:2
        }];
    }

    let chartConfig={
        type:(type==='area')?'line':(type==='pyramid')?'bar':type,
        data:{labels:(type==='pyramid')?labels.reverse():labels,datasets:datasets},
        options:{
            responsive:true,
            maintainAspectRatio:false,
            plugins:{
                title:{display:true,text:document.getElementById('chartTitle').value,font:{size:18}},
                legend:{position:(['pie','doughnut','polarArea','radar'].includes(type))?'right':'top'},
                datalabels:{
                    color:'white',
                    font:{weight:'bold'},
                    formatter:(val,ctx)=>{
                        if(['pie','doughnut','polarArea'].includes(type)){
                            let sum=ctx.chart.data.datasets[0].data.reduce((a,b)=>a+b,0);
                            return Math.round(val/sum*100)+"%";
                        } return val;
                    }
                }
            },
            scales:(['bar','line','area','pyramid'].includes(type))?{
                x:{title:{display:true,text:document.getElementById('xAxisTitle').value}},
                y:{beginAtZero:true,title:{display:true,text:document.getElementById('yAxisTitle').value}}
            }:{}
        },
        plugins:[ChartDataLabels]
    };
    myChart=new Chart(document.getElementById('myChart').getContext('2d'),chartConfig);
}

// Fully vector SVG generator
function downloadSVG(){
    if(!myChart){alert("Generate chart first");return;}
    const type=document.getElementById('chartType').value;
    const {labels,values}=parseChartData(document.getElementById('chartData').value);
    const colors=generateColors(labels.length);
    const width=800, height=600;
    let svg=`<svg xmlns="http://www.w3.org/2000/svg" width="${width}" height="${height}">`;

    // Title
    svg+=`<text x="${width/2}" y="30" text-anchor="middle" font-size="20" font-weight="bold">${document.getElementById('chartTitle').value}</text>`;

    // Bar / Pyramid / Area / Line
    if(['bar','area','line','pyramid'].includes(type)){
        const maxVal=Math.max(...values);
        const barWidth=width*0.6/labels.length;
        const startX=width*0.15;
        values.forEach((val,i)=>{
            let barHeight=(val/maxVal)*400;
            let x=startX+i*barWidth;
            let y=height-50-(barHeight);
            let fill=colors[i];
            if(type==='line'||type==='area'){
                // For line/area just draw circles and lines
                let cx=x+barWidth/2;
                let cy=y;
                if(i>0){
                    let prevX=startX+(i-1)*barWidth+barWidth/2;
                    let prevY=height-50-(values[i-1]/maxVal*400);
                    svg+=`<line x1="${prevX}" y1="${prevY}" x2="${cx}" y2="${cy}" stroke="#3498db" stroke-width="2"/>`;
                }
                svg+=`<circle cx="${cx}" cy="${cy}" r="4" fill="#3498db"/>`;
                if(type==='area' && i>0){
                    let prevX=startX+(i-1)*barWidth+barWidth/2;
                    let prevY=height-50-(values[i-1]/maxVal*400);
                    svg+=`<polygon points="${prevX},${height-50} ${prevX},${prevY} ${cx},${cy} ${cx},${height-50}" fill="rgba(52,152,219,0.4)"/>`;
                }
            } else {
                svg+=`<rect x="${x}" y="${y}" width="${barWidth*0.8}" height="${barHeight}" fill="${fill}"/>`;
                svg+=`<text x="${x+barWidth*0.4}" y="${y-5}" text-anchor="middle" font-size="12" fill="black">${val}</text>`;
            }
            svg+=`<text x="${x+barWidth*0.4}" y="${height-35}" text-anchor="middle" font-size="12">${labels[i]}</text>`;
        });
    }

    // Pie / Doughnut / PolarArea
    if(['pie','doughnut','polarArea'].includes(type)){
        const cx=width/3, cy=height/2, radius=150;
        const total=values.reduce((a,b)=>a+b,0);
        let startAngle=0;
        values.forEach((val,i)=>{
            const sliceAngle=(val/total)*2*Math.PI;
            const endAngle=startAngle+sliceAngle;
            const x1=cx+radius*Math.cos(startAngle);
            const y1=cy+radius*Math.sin(startAngle);
            const x2=cx+radius*Math.cos(endAngle);
            const y2=cy+radius*Math.sin(endAngle);
            const largeArc=(sliceAngle>Math.PI)?1:0;
            if(type==='doughnut') radiusInner=70; else radiusInner=0;
            svg+=`<path d="M${cx},${cy} L${x1},${y1} A${radius},${radius} 0 ${largeArc} 1 ${x2},${y2} Z" fill="${colors[i]}"/>`;
            // Label
            const labelAngle=startAngle+sliceAngle/2;
            const labelRadius=radius*0.65;
            const lx=cx+labelRadius*Math.cos(labelAngle);
            const ly=cy+labelRadius*Math.sin(labelAngle);
            svg+=`<text x="${lx}" y="${ly}" font-size="12" fill="white" text-anchor="middle">${Math.round((val/total)*100)}%</text>`;
            // Legend
            const lx2=500, ly2=100+i*25;
            svg+=`<rect x="${lx2}" y="${ly2-10}" width="15" height="15" fill="${colors[i]}"/>`;
            svg+=`<text x="${lx2+25}" y="${ly2}" font-size="12">${labels[i]} (${val})</text>`;
            startAngle=endAngle;
        });
    }

    svg+="</svg>";
    const blob=new Blob([svg],{type:"image/svg+xml"});
    const url=URL.createObjectURL(blob);
    const link=document.createElement('a');
    link.download="graphmint.svg";
    link.href=url;
    link.click();
    setTimeout(()=>URL.revokeObjectURL(url),100);
}

// Reset and examples
function resetForm(){
    document.getElementById('chartData').value="Sales: 300\nMarketing: 200\nR&D: 150\nSupport: 100";
    document.getElementById('chartTitle').value="Department Budget Allocation";
    document.getElementById('xAxisTitle').value="Department";
    document.getElementById('yAxisTitle').value="Budget ($)";
    document.getElementById('chartType').value="bar";
    createChart();
}

function loadExample(num){
    switch(num){
        case '1':
            document.getElementById('chartData').value="Q1: 450\nQ2: 520\nQ3: 480\nQ4: 600";
            document.getElementById('chartTitle').value="Quarterly Revenue (in thousands)";
            document.getElementById('xAxisTitle').value="Quarter";
            document.getElementById('yAxisTitle').value="Revenue ($)";
            document.getElementById('chartType').value="bar";break;
        case '2':
            document.getElementById('chartData').value="Apple: 25\nSamsung: 22\nXiaomi: 12\nOther: 41";
            document.getElementById('chartTitle').value="Smartphone Market Share";
            document.getElementById('xAxisTitle').value="Brand";
            document.getElementById('yAxisTitle').value="Market Share (%)";
            document.getElementById('chartType').value="pie";break;
        case '3':
            document.getElementById('chartData').value="Direct: 350\nOrganic: 420\nSocial: 180\nEmail: 120";
            document.getElementById('chartTitle').value="Website Traffic Sources";
            document.getElementById('xAxisTitle').value="Source";
            document.getElementById('yAxisTitle').value="Visitors (thousands)";
            document.getElementById('chartType').value="doughnut";break;
    }
    createChart();
}

// Event listeners
document.getElementById('generateBtn').addEventListener('click',createChart);
document.getElementById('resetBtn').addEventListener('click',resetForm);
document.querySelectorAll('.example-text').forEach(el=>el.addEventListener('click',()=>loadExample(el.getAttribute('data-example'))));
document.getElementById('chartType').addEventListener('change',createChart);
document.getElementById('xAxisTitle').addEventListener('input',createChart);
document.getElementById('yAxisTitle').addEventListener('input',createChart);
document.getElementById('downloadPngBtn').addEventListener('click',()=>{if(myChart){const link=document.createElement('a');link.download="graphmint.png";link.href=myChart.canvas.toDataURL("image/png");link.click();}});
document.getElementById('downloadSvgBtn').addEventListener('click',downloadSVG);

window.addEventListener('DOMContentLoaded',createChart);
</script>

</body>
</html>